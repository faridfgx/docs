<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoFX Interpreter</title>
<style>
/* ===== FONT ===== */
@font-face {
    font-family: 'Cascadia';
    src: url('Cascadia.ttf') format('truetype');
}

/* ===== RESET ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* ===== ROOT COLORS ===== */
:root {
    --bg-main: #0f172a;
    --bg-panel: #111827;
    --bg-editor: #020617;
    --bg-output: #020617;

    --border-soft: #1e293b;
    --border-strong: #334155;

    --text-main: #e5e7eb;
    --text-muted: #94a3b8;
    --text-title: #f8fafc;

    --accent-primary: #3b82f6;
    --accent-success: #10b981;
    --accent-danger: #ef4444;
    --accent-warning: #f59e0b;
}

/* ===== BODY ===== */
body {
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
    background: var(--bg-main);
    color: var(--text-main);
    min-height: 100vh;
    padding: 24px;
}

/* ===== CONTAINER ===== */
.container {
    max-width: 1400px;
    margin: auto;
    background: var(--bg-panel);
    border-radius: 12px;
    border: 1px solid var(--border-soft);
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
    overflow: hidden;
}

/* ===== HEADER ===== */
.header {
    padding: 22px 28px;
    border-bottom: 1px solid var(--border-soft);
    background: #020617;
}

.header h1 {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-title);
    letter-spacing: 0.3px;
}

.header p {
    margin-top: 6px;
    font-size: 13px;
    color: var(--text-muted);
}

/* ===== MENU BAR ===== */
.menu-bar {
    background: #0a0f1e;
    border-bottom: 1px solid var(--border-soft);
    padding: 8px 16px;
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.menu-btn, .menu-select {
    padding: 8px 14px;
    background: #020617;
    border: 1px solid var(--border-soft);
    color: var(--text-main);
    border-radius: 6px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
}

.menu-btn:hover, .menu-select:hover {
    border-color: var(--accent-primary);
    background: #0f172a;
}

.menu-select {
    min-width: 180px;
}

.menu-divider {
    width: 1px;
    height: 24px;
    background: var(--border-soft);
    margin: 0 4px;
}

input[type="file"] {
    display: none;
}

/* ===== LAYOUT ===== */
.main-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 620px;
}

/* ===== SECTIONS ===== */
.editor-section,
.output-section {
    padding: 22px;
    display: flex;
    flex-direction: column;
}

.editor-section {
    border-right: 1px solid var(--border-soft);
}

/* ===== TITLES ===== */
.section-title {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 14px;
    color: var(--text-title);
    letter-spacing: 0.2px;
}

/* ===== EDITOR ===== */
.editor-wrapper {
    flex: 1;
    position: relative;
    border-radius: 8px;
    border: 1px solid var(--border-soft);
    background: var(--bg-editor);
    overflow: hidden;
}

#codeEditor {
    width: 100%;
    height: 100%;
    font-family: 'Cascadia', "JetBrains Mono", "Fira Code", monospace;
    font-size: 14px;
    line-height: 1.6;
    padding: 16px;
    border: none;
    background: transparent;
    color: #e5e7eb;
    resize: none;
    outline: none;
}

#highlightLayer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 16px;
    font-family: 'Cascadia', "JetBrains Mono", "Fira Code", monospace;
    font-size: 14px;
    line-height: 1.6;
    color: transparent;
    pointer-events: none;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow: hidden;
}

.editor-wrapper:focus-within {
    border-color: var(--accent-primary);
}

/* ===== SYNTAX HIGHLIGHTING ===== */
.keyword { color: #c792ea; font-weight: 600; }
.type { color: #82aaff; }
.string { color: #c3e88d; }
.number { color: #f78c6c; }
.operator { color: #89ddff; }
.comment { color: #546e7a; font-style: italic; }
.function { color: #ffcb6b; }

/* ===== OUTPUT ===== */
#output {
    flex: 1;
    background: var(--bg-output);
    border: 1px solid var(--border-soft);
    border-radius: 8px;
    padding: 16px;
    font-family: 'Cascadia', "JetBrains Mono", monospace;
    font-size: 14px;
    color: #e5e7eb;
    overflow-y: auto;
    white-space: pre-wrap;
    max-height: 550px;
}

/* ===== INPUT AREA ===== */
.input-container {
    display: none;
    margin-top: 14px;
}

.input-container.active {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#inputPrompt {
    color: var(--accent-warning);
    font-weight: 600;
}

.input-row {
    display: flex;
    gap: 10px;
}

#userInput {
    flex: 1;
    padding: 10px;
    background: #020617;
    color: var(--text-main);
    border: 1px solid var(--border-soft);
    border-radius: 6px;
    font-family: 'Cascadia', "JetBrains Mono", monospace;
}

#userInput:focus {
    outline: none;
    border-color: var(--accent-primary);
}

/* ===== BUTTONS ===== */
.controls {
    display: flex;
    gap: 10px;
    margin-top: 14px;
}

button {
    padding: 10px 16px;
    border-radius: 6px;
    border: 1px solid var(--border-soft);
    background: #020617;
    color: var(--text-main);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

button:hover {
    border-color: var(--accent-primary);
    color: white;
}

.btn-run {
    background: var(--accent-success);
    border: none;
    color: #022c22;
}

.btn-run:hover {
    background: #059669;
}

.btn-clear {
    background: var(--accent-danger);
    border: none;
    color: #450a0a;
}

.btn-clear:hover {
    background: #dc2626;
}

.btn-example {
    background: var(--accent-primary);
    border: none;
    color: #020617;
}

.btn-example:hover {
    background: #2563eb;
}

/* ===== MESSAGES ===== */
.error {
    color: #f87171;
}

.success {
    color: #34d399;
}

.info {
    color: #60a5fa;
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-thumb {
    background: #334155;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #475569;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 960px) {
    .main-content {
        grid-template-columns: 1fr;
    }

    .editor-section {
        border-right: none;
        border-bottom: 1px solid var(--border-soft);
    }
}
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AlgoFX WebVersion</h1>
            <p>Ex√©cuteur d'algorithmes</p>
        </div>

        <div class="menu-bar">
            <button class="menu-btn" onclick="newFile()">üìÑ Nouveau</button>
            <button class="menu-btn" onclick="document.getElementById('fileInput').click()">üìÇ Ouvrir</button>
            <button class="menu-btn" onclick="saveFile()">üíæ Sauvegarder</button>
            <input type="file" id="fileInput" accept=".algo" onchange="openFile(event)">
            
            <div class="menu-divider"></div>
            
            <button class="menu-btn" onclick="undo()">‚Ü∂ Annuler</button>
            <button class="menu-btn" onclick="redo()">‚Ü∑ Refaire</button>
            
            <div class="menu-divider"></div>
            
            <select class="menu-select" id="templateSelect" onchange="loadTemplate()">
                <option value="">üìö S√©lectionner un mod√®le</option>
            </select>
        </div>

        <div class="main-content">
            <div class="editor-section">
                <div class="section-title">‚úèÔ∏è √âditeur d'Algorithme</div>
                <div class="editor-wrapper">
                    <div id="highlightLayer"></div>
                    <textarea id="codeEditor" spellcheck="false"></textarea>
                </div>
                <div class="controls">
                    <button class="btn-run" onclick="runAlgorithm()">‚ñ∂ Ex√©cuter</button>
                    <button class="btn-clear" onclick="clearEditor()">üóëÔ∏è Effacer</button>
                </div>
            </div>

            <div class="output-section">
                <div class="section-title">üì∫ Console de Sortie</div>
                <div id="output"></div>
                <div id="inputArea" class="input-container">
                    <div id="inputPrompt"></div>
                    <div class="input-row">
                        <input type="text" id="userInput" placeholder="Entrez une valeur...">
                        <button id="submitInput" onclick="submitInput()">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
// Templates data
const templates = [
    {
        name: "Factoriel",
        code: `Algorithme Factoriel;
Var
    n, fact, i: entier;
Debut
    ecrire("Entrez un nombre pour calculer sa factorielle:");
    lire(n);
    
    fact <- 1;
    
    pour i de 1 a n faire
        fact <- fact * i;
    finpour
    
    ecrire("La factorielle de", n, "est", fact);
Fin`
    },
    {
        name: "Nombres Premiers",
        code: `Algorithme NombresPremiers;
var
    n, i, j, temp: entier;
    estPremier: booleen;
debut
    ecrire("Entrez la limite N:");
    lire(n);
    
    ecrire("Nombres premiers jusqu'√†", n, ":");
    
    pour i de 2 a n faire
        estPremier <- vrai;
        
        pour j de 2 a i-1 faire
            temp <- i mod j;
            si temp = 0 alors
                estPremier <- faux;
                sortir;
            finsi
        finpour
        
        si estPremier = vrai alors
            ecrire(i);
        finsi
    finpour
Fin`
    },
    {
        name: "Fibonacci",
        code: `Algorithme SuiteFibonacci;
Var
    n, i, a, b, c: entier;
Debut
    ecrire("Combien de termes de la suite de Fibonacci voulez-vous?");
    lire(n);
    
    ecrire("Suite de Fibonacci:");
    
    si n >= 1 alors
        ecrire(0);
    finsi
    
    si n >= 2 alors
        ecrire(1);
    finsi
    
    a <- 0;
    b <- 1;
    
    pour i de 3 a n faire
        c <- a + b;
        ecrire(c);
        a <- b;
        b <- c;
    finpour
Fin`
    },
    {
        name: "Palindrome",
        code: `Algorithme VerificationPalindrome;
Var
    nombre, copie, inverse, chiffre: entier;
Debut
    ecrire("Entrez un nombre:");
    lire(nombre);
    
    copie <- nombre;
    inverse <- 0;
    
    tantque copie > 0 faire
        chiffre <- copie mod 10;
        inverse <- inverse * 10 + chiffre;
        copie <- copie div 10;
    fintantque
    
    si nombre = inverse alors
        ecrire(nombre, "est un palindrome");
    sinon
        ecrire(nombre, "n'est pas un palindrome");
    finsi
Fin`
    },
    {
        name: "Conversion Temp√©rature",
        code: `Algorithme ConversionTemperature;
Var
    choix: entier;
    celsius, fahrenheit: reel;
Debut
    ecrire("Conversion de temp√©rature");
    ecrire("1- Celsius vers Fahrenheit");
    ecrire("2- Fahrenheit vers Celsius");
    ecrire("Entrez votre choix (1 ou 2):");
    
    lire(choix);
    
    si choix = 1 alors
        ecrire("Entrez la temp√©rature en Celsius:");
        lire(celsius);
        fahrenheit <- (celsius * 9/5) + 32;
        ecrire(celsius, "¬∞C √©quivaut √†", fahrenheit, "¬∞F");
    sinon
        si choix = 2 alors
            ecrire("Entrez la temp√©rature en Fahrenheit:");
            lire(fahrenheit);
            celsius <- (fahrenheit - 32) * 5/9;
            ecrire(fahrenheit, "¬∞F √©quivaut √†", celsius, "¬∞C");
        sinon
            ecrire("Choix invalide");
        finsi
    finsi
Fin`
    },
    {
        name: "D√©cimal vers Binaire",
        code: `Algorithme DecimalVersBinaire;
Var
    nombreDecimal, binaire, reste, multiplicateur: entier;
Debut
    ecrire("Entrez un nombre entier en base d√©cimale:");
    lire(nombreDecimal);
    
    binaire <- 0;
    multiplicateur <- 1;
    
    tantque nombreDecimal <> 0 faire
        reste <- nombreDecimal mod 2;
        binaire <- binaire + (reste * multiplicateur);
        nombreDecimal <- nombreDecimal div 2;
        multiplicateur <- multiplicateur * 10;
    fintantque
    
    ecrire("Repr√©sentation binaire:", binaire);
Fin`
    }
];

// Undo/Redo history
let history = [];
let historyIndex = -1;
let isUndoRedo = false;

// Variables for algorithm execution
let variables = {};
let constants = {};
let output = [];
let waitingForInput = false;
let inputResolve = null;

// Initialize templates dropdown
function initTemplates() {
    const select = document.getElementById('templateSelect');
    templates.forEach((template, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = template.name;
        select.appendChild(option);
    });
}

function loadTemplate() {
    const select = document.getElementById('templateSelect');
    const index = select.value;
    if (index !== '') {
        setEditorContent(templates[index].code);
        select.value = '';
    }
}

// File operations
function newFile() {
    if (confirm('Cr√©er un nouveau fichier? Les modifications non sauvegard√©es seront perdues.')) {
        setEditorContent('');
    }
}

function saveFile() {
    const content = document.getElementById('codeEditor').value;
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'algorithme.algo';
    a.click();
    URL.revokeObjectURL(url);
}

function openFile(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            setEditorContent(e.target.result);
        };
        reader.readAsText(file);
    }
}

// Undo/Redo functionality
function saveHistory() {
    if (isUndoRedo) return;
    
    const content = document.getElementById('codeEditor').value;
    
    // Remove any history after current index
    history = history.slice(0, historyIndex + 1);
    
    // Add new state
    history.push(content);
    historyIndex++;
    
    // Limit history size
    if (history.length > 50) {
        history.shift();
        historyIndex--;
    }
}

function undo() {
    if (historyIndex > 0) {
        isUndoRedo = true;
        historyIndex--;
        document.getElementById('codeEditor').value = history[historyIndex];
        isUndoRedo = false;
    }
}

function redo() {
    if (historyIndex < history.length - 1) {
        isUndoRedo = true;
        historyIndex++;
        document.getElementById('codeEditor').value = history[historyIndex];
        isUndoRedo = false;
    }
}

function setEditorContent(content) {
    document.getElementById('codeEditor').value = content;
    saveHistory();
}

// Editor event listeners
document.getElementById('codeEditor').addEventListener('input', function() {
    saveHistory();
});

// Algorithm execution functions
function print(message, type = '') {
    const className = type ? ` class="${type}"` : '';
    output.push(`<span${className}>${escapeHtml(String(message))}</span>`);
    updateOutput();
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

function updateOutput() {
    document.getElementById('output').innerHTML = output.join('\n');
    document.getElementById('output').scrollTop = document.getElementById('output').scrollHeight;
}

async function readInput(prompt = '') {
    return new Promise((resolve) => {
        const inputArea = document.getElementById('inputArea');
        const inputPrompt = document.getElementById('inputPrompt');
        const userInput = document.getElementById('userInput');

        inputPrompt.textContent = prompt || 'Entrez une valeur:';
        inputArea.classList.add('active');
        userInput.value = '';
        userInput.focus();

        waitingForInput = true;
        inputResolve = resolve;
    });
}

function submitInput() {
    if (!waitingForInput) return;

    const userInput = document.getElementById('userInput');
    const value = userInput.value.trim();

    if (value === '') {
        print('‚ö†Ô∏è Veuillez entrer une valeur', 'error');
        return;
    }

    print(`> ${value}`, 'info');

    const inputArea = document.getElementById('inputArea');
    inputArea.classList.remove('active');

    waitingForInput = false;
    if (inputResolve) {
        inputResolve(value);
        inputResolve = null;
    }
}

document.getElementById('userInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        submitInput();
    }
});

function parseValue(value) {
    value = String(value).trim();
    
    if (value === 'vrai') return true;
    if (value === 'faux') return false;
    
    if (value.startsWith('"') && value.endsWith('"')) {
        return value.slice(1, -1);
    }
    
    if (!isNaN(value)) {
        return value.includes('.') ? parseFloat(value) : parseInt(value);
    }
    
    return value;
}

function evaluateExpression(expr) {
    expr = String(expr).trim();
    
    expr = expr.replace(/\bvrai\b/g, 'true');
    expr = expr.replace(/\bfaux\b/g, 'false');
    
    for (let [key, value] of Object.entries({...constants, ...variables})) {
        const regex = new RegExp('\\b' + key + '\\b', 'g');
        const replacement = (typeof value === 'number' && value < 0) ? `(${value})` : JSON.stringify(value);
        expr = expr.replace(regex, replacement);
    }
    
    expr = expr.replace(/\bet\b/g, '&&');
    expr = expr.replace(/\bou\b/g, '||');
    expr = expr.replace(/\bnon\b/g, '!');
    
    expr = expr.replace(/==/g, '===');
    expr = expr.replace(/([^=!<>])=([^=])/g, '$1===$2');
    expr = expr.replace(/<>/g, '!==');
    
    expr = expr.replace(/\bmod\b/g, '%');
    expr = expr.replace(/(\S+)\s+div\s+(\S+)/g, 'Math.floor($1/$2)');
    expr = expr.replace(/\bpuissance\b/g, '**');
    
    expr = expr.replace(/racine\s*\(/g, 'Math.sqrt(');
    
    try {
        return eval(expr);
    } catch (e) {
        throw new Error(`Erreur d'√©valuation: ${expr}`);
    }
}

async function executeLines(lines, start, end) {
    let i = start;
    
    while (i <= end) {
        let line = lines[i].trim();
        
        if (!line || line.startsWith('//')) {
            i++;
            continue;
        }
        
        if (line.includes('<-')) {
            const [varName, expr] = line.split('<-').map(s => s.trim().replace(';', ''));
            variables[varName] = evaluateExpression(expr);
        }
        else if (line.startsWith('lire(')) {
            const varsStr = line.match(/lire\((.*?)\)/)[1];
            const varNames = varsStr.split(',').map(v => v.trim());
            
            for (let varName of varNames) {
                const value = await readInput(`Entrez ${varName}:`);
                variables[varName] = parseValue(value);
            }
        }
        else if (line.startsWith('ecrire(')) {
            const content = line.match(/ecrire\((.*?)\);?$/s)[1];
            const parts = [];
            let current = '';
            let inString = false;
            
            for (let i = 0; i < content.length; i++) {
                const char = content[i];
                
                if (char === '"') {
                    inString = !inString;
                    current += char;
                } else if (char === ',' && !inString) {
                    parts.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }
            if (current) parts.push(current.trim());
            
            const outputParts = [];
            for (let part of parts) {
                if (part.startsWith('"') && part.endsWith('"')) {
                    outputParts.push(part.slice(1, -1));
                } else {
                    outputParts.push(evaluateExpression(part));
                }
            }
            
            print(outputParts.join(' '));
        }
        else if (line.startsWith('si ')) {
            const condition = line.match(/si\s+(.*?)\s+alors/)[1];
            const result = evaluateExpression(condition);
            
            let siEnd = findBlockEnd(lines, i, 'si', 'finsi');
            let sinonIndex = findSinon(lines, i, siEnd);
            
            if (result) {
                await executeLines(lines, i + 1, sinonIndex !== -1 ? sinonIndex - 1 : siEnd - 1);
            } else if (sinonIndex !== -1) {
                await executeLines(lines, sinonIndex + 1, siEnd - 1);
            }
            
            i = siEnd;
        }
        else if (line.startsWith('tantque ')) {
            const condition = line.match(/tantque\s+(.*?)\s+faire/)[1];
            const loopEnd = findBlockEnd(lines, i, 'tantque', 'fintantque');
            
            while (evaluateExpression(condition)) {
                try {
                    await executeLines(lines, i + 1, loopEnd - 1);
                } catch (e) {
                    if (e.message === 'BREAK') break;
                    throw e;
                }
            }
            
            i = loopEnd;
        }
        else if (line.startsWith('pour ')) {
            const match = line.match(/pour\s+(\w+)\s+de\s+(.+?)\s+a\s+(.+?)(?:\s+pas\s+(.+?))?\s+faire/);
            const varName = match[1];
            const start = evaluateExpression(match[2]);
            const end = evaluateExpression(match[3]);
            const step = match[4] ? evaluateExpression(match[4]) : 1;
            
            const loopEnd = findBlockEnd(lines, i, 'pour', 'finpour');
            
            for (let val = start; step > 0 ? val <= end : val >= end; val += step) {
                variables[varName] = val;
                try {
                    await executeLines(lines, i + 1, loopEnd - 1);
                } catch (e) {
                    if (e.message === 'BREAK') break;
                    throw e;
                }
            }
            
            i = loopEnd;
        }
        else if (line === 'sortir;') {
            throw new Error('BREAK');
        }
        
        i++;
    }
}

function findBlockEnd(lines, start, startKeyword, endKeyword) {
    let depth = 1;
    for (let i = start + 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (line.startsWith(startKeyword + ' ')) depth++;
        if (line === endKeyword) {
            depth--;
            if (depth === 0) return i;
        }
    }
    return lines.length - 1;
}

function findSinon(lines, start, end) {
    let depth = 0;
    for (let i = start; i < end; i++) {
        const line = lines[i].trim();
        if (line.startsWith('si ')) depth++;
        if (line === 'finsi') depth--;
        if (line === 'sinon' && depth === 1) return i;
    }
    return -1;
}

function lowercasePreservingStrings(code) {
    let result = '';
    let inString = false;
    
    for (let i = 0; i < code.length; i++) {
        const char = code[i];
        
        if (char === '"') {
            inString = !inString;
            result += char;
        } else if (inString) {
            result += char;
        } else {
            result += char.toLowerCase();
        }
    }
    
    return result;
}

async function runAlgorithm() {
    const code = document.getElementById('codeEditor').value;
    
    variables = {};
    constants = {};
    output = [];
    
    document.getElementById('output').innerHTML = '';
    
    try {
        const processedCode = lowercasePreservingStrings(code);
        const lines = processedCode.split('\n');
        let inVar = false;
        let inConst = false;
        let debutIndex = -1;
        
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i].trim();
            
            if (line === 'var') {
                inVar = true;
                inConst = false;
            } else if (line === 'const') {
                inConst = true;
                inVar = false;
            } else if (line === 'debut') {
                debutIndex = i;
                break;
            } else if (inVar && line && !line.startsWith('//')) {
                const parts = line.split(':');
                if (parts.length === 2) {
                    const varNames = parts[0].split(',').map(v => v.trim());
                    for (let varName of varNames) {
                        variables[varName] = 0;
                    }
                }
            } else if (inConst && line && !line.startsWith('//')) {
                const match = line.match(/(\w+)\s*=\s*(.+?);?$/);
                if (match) {
                    constants[match[1]] = parseValue(match[2]);
                }
            }
        }
        
        if (debutIndex === -1) {
            throw new Error('Mot-cl√© "Debut" non trouv√©');
        }
        
        const finIndex = lines.findIndex((l, i) => i > debutIndex && l.trim() === 'fin');
        
        print('=== Ex√©cution de l\'algorithme ===\n', 'success');
        await executeLines(lines, debutIndex + 1, finIndex - 1);
        print('\n=== Termin√© ===', 'success');
        
    } catch (e) {
        if (e.message !== 'BREAK') {
            print(`\n‚ùå Erreur: ${e.message}`, 'error');
        }
    }
}

function clearEditor() {
    if (confirm('Effacer tout le contenu de l\'√©diteur?')) {
        setEditorContent('');
        document.getElementById('output').innerHTML = '';
        output = [];
    }
}

// Initialize on load
window.onload = () => {
    initTemplates();
    setEditorContent(templates[0].code);
};
    </script>
</body>
</html>