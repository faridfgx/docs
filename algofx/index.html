<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoFX </title>
	<link rel="icon" type="image/png" href="files/fxlogo.png">
	<link rel="apple-touch-icon" href="files/fxlogo.png">
    <link rel="stylesheet" href="files/afx.css">
	<style>
.browser-warning {
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 23, 0.85);
    backdrop-filter: blur(6px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.browser-warning.active {
    display: flex;
}

.warning-box {
    background: var(--bg-panel);         /* CHANGED */
    border: 1px solid var(--border-soft);
    border-radius: 10px;
    padding: 24px;
    max-width: 520px;
    color: var(--text-main);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
}

.warning-box h3 {
    margin-bottom: 14px;
    color: var(--accent-warning);
	text-align: center;
}

.warning-box p {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 12px;
}

.warning-actions {
    display: flex;
	justify-content: center;
    gap: 10px;
    margin-top: 18px;
}
.warning-actions .menu-btn {
    min-width: 140px;
    text-align: center;
}

.btn-cancel {
    background: var(--bg-editor);        /* CHANGED */
    border: 1px solid var(--border-soft);
    color: var(--text-main);
}
[data-theme="light"] .browser-warning {
    background: rgba(248, 250, 252, 0.85);
}

[data-theme="light"] .warning-box {
    background: #ffffff;
    border-color: #e5e7eb;
    color: #020617;
    box-shadow: 0 18px 45px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .warning-box h3 {
    color: #d97706; /* warning amber */
}

[data-theme="light"] .warning-box p {
    color: #1f2937;
}

[data-theme="light"] .btn-cancel {
    background: #f1f5f9;
    border-color: #cbd5e1;
    color: #020617;
}
	</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-title">
                <img src="files/fxlogo.png" alt="AlgoFX Logo" class="app-logo">
                <div class="title-text">
                    <h1>AlgoFX</h1>
                    <p>ExÃ©cuteur d'algorithmes</p>
                </div>
            </div>
        </div>

        <div class="menu-bar">
            <button class="menu-btn" onclick="newFile()">ğŸ“„ Nouveau</button>
            <button class="menu-btn" onclick="document.getElementById('fileInput').click()">ğŸ“‚ Ouvrir</button>
            <button class="menu-btn" onclick="saveFile()">ğŸ’¾ Sauvegarder</button>
            <input type="file" id="fileInput" accept=".algo" onchange="openFile(event)">
            
            <div class="menu-divider"></div>
            
            <button class="menu-btn" onclick="undo()">â†¶ Annuler</button>
            <button class="menu-btn" onclick="redo()">â†· Refaire</button>
            
            <div class="menu-divider"></div>
            
            <select class="menu-select" id="templateSelect" onchange="loadTemplate()">
                <option value="">ğŸ“š Exemples</option>
            </select>
            <button class="menu-btn" onclick="downoff()">Download</button>
            
            <button class="theme-toggle" onclick="toggleTheme()" title="Changer le thÃ¨me">
                <span id="themeIcon">ğŸŒ™</span>
            </button>
        </div>

        <div class="main-content">
            <div class="editor-section">
                <div class="section-title">âœï¸ Ã‰diteur d'Algorithme</div>
                <div class="editor-wrapper">
                    <div id="highlightLayer"></div>
                    <textarea id="codeEditor" spellcheck="false"></textarea>
                </div>
                <div class="controls">
                    <button class="btn-run" onclick="runAlgorithm()">â–¶ ExÃ©cuter</button>
                    <button class="btn-clear" onclick="clearEditor()">ğŸ—‘ï¸ Effacer</button>
                </div>
            </div>

            <div class="output-section">
                <div class="section-title">ğŸ“º Console de Sortie</div>
                <div id="output"></div>
                <div id="inputArea" class="input-container">
                    <div id="inputPrompt"></div>
                    <div class="input-row">
                        <input type="text" id="userInput" placeholder="Entrez une valeur...">
                        <button id="submitInput" onclick="submitInput()">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
	
    <footer class="footer">
        AlgoFX Â© 2026 â€“ By FARID MEZANE
    </footer>
<div id="browserWarning" class="browser-warning">
    <div class="warning-box">
        <h3>âš ï¸ Important / Ù‡Ø§Ù…</h3>
        <p dir="rtl">
            <strong>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© :</strong><br>Ø§Ù„Ù†Ø³Ø®Ø© ØºÙŠØ± Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ø§Ù„Ø£Ù†ØªØ±Ù†Øª Ù…Ù† AlgoFX ØªØªØ·Ù„Ø¨ Ù…ØªØµÙØ­Ù‹Ø§ Ø­Ø¯ÙŠØ«Ù‹Ø§ Ù…Ø«Ù„
			Chrome Ø£Ùˆ Edge Ø£Ùˆ Firefox.<br>
			Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø©. </p>
        <p>
            <strong>FranÃ§ais :</strong><br>
            La version hors ligne dâ€™AlgoFX nÃ©cessite un navigateur moderne
            (Chrome, Edge, Firefox, etc.).<br>
            Les anciens navigateurs ne sont pas pris en charge.
        </p>
        <div class="warning-actions">
            <button class="menu-btn btn-cancel" onclick="closeWarning()">Annuler / Ø¥Ù„ØºØ§Ø¡</button>
            <button class="menu-btn btn-run" onclick="confirmDownload()">Continuer / Ù…ØªØ§Ø¨Ø¹Ø©</button>
        </div>
    </div>
</div>
    <script src="files/templates.js"></script>
	<script src="files/afx.js"></script>
<script>
/* ===============================
   DOWNLOAD WARNING MODAL
   =============================== */

function downoff() {
    const modal = document.getElementById("browserWarning");
    if (!modal) return;
    modal.classList.add("active");
}

function closeWarning() {
    const modal = document.getElementById("browserWarning");
    if (!modal) return;
    modal.classList.remove("active");
}

function confirmDownload() {
    closeWarning();

    const link = document.createElement("a");
    link.href = "algofx_web.zip";   // adjust path if needed
    link.download = "algofx_web.zip";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

/* ===============================
   THEME TOGGLE (LIGHT / DARK)
   =============================== */

function toggleTheme() {
    const root = document.documentElement;
    const themeIcon = document.getElementById("themeIcon");
    if (!themeIcon) return;

    const currentTheme = root.getAttribute("data-theme") || "dark";
    const nextTheme = currentTheme === "dark" ? "light" : "dark";

    root.setAttribute("data-theme", nextTheme);
    themeIcon.textContent = nextTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
    localStorage.setItem("theme", nextTheme);
}

/* ===============================
   LOAD SAVED THEME (EARLY)
   =============================== */

(function loadTheme() {
    const savedTheme = localStorage.getItem("theme") || "dark";
    const root = document.documentElement;

    root.setAttribute("data-theme", savedTheme);

    // Update icon after DOM is ready
    document.addEventListener("DOMContentLoaded", () => {
        const themeIcon = document.getElementById("themeIcon");
        if (themeIcon) {
            themeIcon.textContent = savedTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        }
    });
})();
</script>

</body>
</html>